<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Input Fields with PDF Download</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.13/jspdf.plugin.autotable.min.js"></script>
</head>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
    }

    form {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .input-group {
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .input-group input {
        flex: 1;
        border: none;
        padding: 10px 20px;
    }

    button {
        margin-top: 10px;
        padding: 10px;
        font-size: 12px;
        cursor: pointer;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

    table, th, td {
        border: 1px solid black;
    }

    th, td {
        padding: 10px;
        text-align: left;
    }
</style>
<body>
    <label for="numberOfInputs">Number of Items:</label>
    <input type="number" onkeyup="generateInputs()" id="numberOfInputs" min="1" max="10" value="1">
    
    <form id="inputForm">
        <!-- Dynamic inputs will be appended here -->
    </form>
    <button onclick="calculateTotal()">Calculate Total</button>
    <div id="summaryTable"></div>
    <div id="summary"></div>
    <button onclick="generatePDF()">Download PDF</button>
<script>
    function generateInputs() {
        const numberOfInputs = document.getElementById('numberOfInputs').value;
        const form = document.getElementById('inputForm');
        form.innerHTML = ''; // Clear previous inputs

        for (let i = 0; i < numberOfInputs; i++) {
            const inputGroup = document.createElement('div');
            inputGroup.className = 'input-group';

            const itemName = document.createElement('input');
            itemName.type = 'text';
            itemName.name = 'itemName' + (i + 1);
            itemName.placeholder = 'Item ' + (i + 1) + ' Name';
            inputGroup.appendChild(itemName);

            const itemPrice = document.createElement('input');
            itemPrice.type = 'number';
            itemPrice.name = 'itemPrice' + (i + 1);
            itemPrice.placeholder = 'Price';
            itemPrice.step = '0.01';
            inputGroup.appendChild(itemPrice);

            const itemQuantity = document.createElement('input');
            itemQuantity.type = 'number';
            itemQuantity.name = 'itemQuantity' + (i + 1);
            itemQuantity.placeholder = 'Quantity';
            itemQuantity.min = '1';
            inputGroup.appendChild(itemQuantity);

            form.appendChild(inputGroup);
        }
    }

    function calculateTotal() {
        const numberOfInputs = document.getElementById('numberOfInputs').value;
        let total = 0;
        let summaryHtml = '<h3>Summary of Items</h3><ul>';
        let tableHtml = '<table><thead><tr><th>S/N</th><th>Item</th><th>Quantity</th><th>Price</th><th>Total Amount</th></tr></thead><tbody>';

        for (let i = 0; i < numberOfInputs; i++) {
            const name = document.getElementsByName('itemName' + (i + 1))[0].value;
            const price = parseFloat(document.getElementsByName('itemPrice' + (i + 1))[0].value) || 0;
            const quantity = parseInt(document.getElementsByName('itemQuantity' + (i + 1))[0].value) || 0;
            const totalPrice = price * quantity;
            total += totalPrice;

            tableHtml += `<tr><td>${i + 1}</td><td>${name}</td><td>${quantity}</td><td>#${price.toFixed(2)}</td><td>#${totalPrice.toFixed(2)}</td></tr>`;
            summaryHtml += `<li>${name}: #${price.toFixed(2)} x ${quantity} = #${totalPrice.toFixed(2)}</li>`;
        }

        tableHtml += `<tr><td colspan="4" style="text-align: right;"><strong>Total Amount:</strong></td><td><strong>#${total.toFixed(2)}</strong></td></tr>`;
        tableHtml += '</tbody></table>';
        summaryHtml += '</ul>';
        document.getElementById('summaryTable').innerHTML = tableHtml;
        document.getElementById('summary').innerHTML = summaryHtml;
    }

    function generatePDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        // Add summary to the PDF
        const summaryHtml = document.getElementById('summary').innerText;
        doc.setFontSize(16);
        doc.text('Summary of Items', 10, 10); // Title
        doc.setFontSize(12);
        doc.text(summaryHtml, 10, 20); // Summary

        // Convert table HTML to an array of rows and columns
        const tableHtml = document.getElementById('summaryTable').innerHTML;
        const table = document.createElement('div');
        table.innerHTML = tableHtml;
        const rows = [];
        const headers = ['S/N', 'Item', 'Quantity', 'Price', 'Total Amount'];

        table.querySelectorAll('tbody tr').forEach((tr) => {
            const cells = tr.querySelectorAll('td');
            const row = [];
            cells.forEach(cell => row.push(cell.innerText));
            rows.push(row);
        });

        // Calculate the starting Y position for the table
        const summaryHeight = doc.getTextDimensions(summaryHtml).h;
        const startY = 30 + summaryHeight + 10; // Adjust start position with spacing

        // Add the table with spacing from summary
        doc.autoTable({
            head: [headers],
            body: rows,
            startY: startY, // Start table below the summary
            margin: { top: 10 }
        });

        // Add footer text
        const pageHeight = doc.internal.pageSize.height;
        const footerText = 'Powered by Awatech Digital World';
        doc.setFontSize(10);
        doc.text(footerText, 10, pageHeight - 10);

        // Save the PDF
        doc.save('summary.pdf');
    }

    window.onload = generateInputs;
</script>
</body>
</html>